---
created: 2025-09-20T03:46:14Z
last_updated: 2025-09-20T03:51:08Z
version: 1.0
author: Claude Code PM System
---

# 项目风格指南

## 编码标准

### 一般原则
- **可读性优先**: 代码应该易于理解
- **一致性**: 遵循代码库中已建立的模式
- **简单性**: 优先选择简单解决方案而非复杂方案
- **可维护性**: 编写未来的你能理解的代码

### 文件组织
- 使用清晰、描述性的文件名
- 将相关功能分组在一起
- 保持文件专注于单一职责
- 使用目录结构传达组织结构

### 命名约定

#### 文件和目录
- **Markdown 文件**: kebab-case（如 `project-overview.md`）
- **目录**: 小写，无空格（如 `.claude/context/`）
- **中文内容**: 适当时使用中文名称
- **史诗目录**: 小写功能名（如 `user-authentication/`）

#### 代码元素
- **变量**: camelCase（如 `projectStatus`）
- **函数**: camelCase，动词优先（如 `calculateTotal`）
- **类**: PascalCase（如 `ProjectManager`）
- **常量**: UPPER_SNAKE_CASE（如 `MAX_RETRIES`）
- **私有成员**: 下划线前缀（如 `_internalState`）

### 文档标准

#### Markdown 文件
- **前置元数据**: 上下文文件中始终包含 YAML 前置元数据
- **标题**: 使用 # 作为标题，## 作为主要章节
- **列表**: 使用 - 作为无序列表，1. 作为有序列表
- **代码块**: 尽可能指定语言
- **链接**: 使用描述性链接文本

#### 注释
- **为什么，而不是什么**: 解释代码为什么做某事
- **公共 API**: 记录参数和返回值
- **复杂逻辑**: 使用内联注释分解
- **TODOs**: 使用 TODO: 格式，尽可能包含负责人

### 代码风格

#### 空白
- **缩进**: Markdown 使用 2 个空格，代码使用语言特定缩进
- **行长度**: 目标为 80-100 个字符
- **空行**: 分隔逻辑部分
- **尾随空白**: 永远不要包含

#### 大括号和括号
- **大括号**: 大多数语言使用 K&R 风格
- **括号**: 为了清晰使用，即使可选时
- **条件语句**: 考虑复杂条件的垂直对齐

## 项目特定约定

### 上下文文件
- **位置**: `.claude/context/`
- **命名**: 标准名称（progress.md、project-structure.md 等）
- **前置元数据**: 始终包含 created、last_updated、version、author
- **更新**: 进行更改时递增 last_updated

### 史诗文件
- **位置**: `.claude/epics/[epic-name]/`
- **主文件**: `epic.md`
- **任务文件**: GitHub 同步后的 `[issue-id].md`
- **更新**: 存储在 `updates/` 目录中

### PRD 文件
- **位置**: `.claude/prds/`
- **命名**: kebab-case 功能名
- **结构**: 遵循 PRD 模板
- **语言**: 使用具有清晰部分的 markdown

## 命令开发

### 命令文件
- **位置**: `.claude/commands/[category]/[command].md`
- **命名**: kebab-case（如 `epic-decompose.md`）
- **文档**: 包括用法、示例和参数

### 命令实现
- **错误处理**: 优雅的失败和清晰的消息
- **验证**: 处理前检查输入
- **原子性**: 要么完全完成，要么根本不完成
- **幂等性**: 可以安全运行多次

## Git 工作流

### 提交
- **消息格式**: 祈使语气，现在时态
- **范围**: 在主题中包含组件或领域
- **正文**: 需要时详细说明
- **签名**: AI 贡献包含 co-authored-by

示例：
```
feat(pm): 添加史诗分解命令

添加 /pm:epic-decompose 命令来将史诗分解为
具有验收标准的可操作任务。

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

### 分支
- **功能分支**: feature/[name]
- **史诗分支**: epic/[name]
- **热修复分支**: hotfix/[description]
- **版本分支**: release/[version]

## 测试指南

### 测试结构
- **文件命名**: `[module].test.js` 或类似
- **测试组织**: 按功能分组
- **测试命名**: 描述性，说明测试内容
- **设置/清理**: 使用 before/after 钩子

### 测试编写
- **真实场景**: 测试实际使用模式
- **边界情况**: 包含边界条件
- **错误情况**: 测试失败模式
- **详细输出**: 有助于调试

### 无模拟策略
- **真实服务**: 针对实际实现测试
- **集成测试**: 测试完整工作流
- **性能**: 在相关时包含计时
- **资源清理**: 始终清理测试数据

## 代理指南

### 代理专业化
- **单一职责**: 每个代理都有明确的重点
- **上下文优化**: 最小化上下文使用
- **输出格式**: 标准化的响应结构
- **错误处理**: 优雅降级

### 代理协调
- **清晰接口**: 定义良好的输入/输出
- **隔离**: 代理在单独的上下文中工作
- **通信**: 通过文件或 API 调用
- **同步**: 明确的协调点

## 质量保证

### 代码审查
- **自我审查**: 始终审查自己的代码
- **清单**: 使用定义的质量标准
- **自动检查**: 运行 linting 和类型检查
- **手动验证**: 手动测试更改

### 持续集成
- **快速反馈**: 快速构建和测试周期
- **所有测试**: 永远不要跳过测试
- **覆盖率**: 目标高测试覆盖率
- **文档**: 保持文档与代码同步

## 安全考虑

### 数据处理
- **无秘密**: 永远不要提交凭据
- **输入验证**: 清理所有输入
- **输出编码**: 防止注入攻击
- **隐私**: 最小化数据收集

### GitHub 集成
- **令牌安全**: 使用安全的令牌存储
- **API 限制**: 遵守速率限制
- **权限**: 最小权限原则
- **审计**: 记录所有 GitHub 操作

## 国际化

### 语言支持
- **主要**: 所有代码和技术文档使用英语
- **次要**: 项目特定文档使用中文
- **一致性**: 每个文件选择一种语言
- **翻译**: 考虑用户面向文本的 i18n

### 文化考虑
- **时区**: 时间戳使用 UTC
- **日期格式**: ISO 8601 标准
- **数字格式**: 区域感知格式化
- **包容性语言**: 避免文化特定引用

## 性能指南

### 效率
- **时间复杂度**: 考虑算法效率
- **空间复杂度**: 最小化内存使用
- **缓存**: 适当缓存，不要过度缓存
- **延迟加载**: 仅在需要时加载资源

### 可扩展性
- **水平扩展**: 为多个实例设计
- **数据库**: 考虑查询优化
- **API 设计**: 支持分页和过滤
- **后台作业**: 卸载长时间运行的任务

## 维护

### 版本控制
- **语义版本控制**: 遵循 SemVer 原则
- **破坏性更改**: 清楚记录
- **弃用**: 提供迁移路径
- **向后兼容**: 尽可能保持

### 文档
- **README 文件**: 保持最新
- **API 文档**: 从源代码生成
- **示例**: 提供工作示例
- **变更日志**: 跟踪重要更改